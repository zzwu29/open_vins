<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenVINS: ov_msckf::Simulator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVINS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceov__msckf.html">ov_msckf</a></li><li class="navelem"><a class="el" href="classov__msckf_1_1Simulator.html">Simulator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classov__msckf_1_1Simulator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ov_msckf::Simulator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Master simulator class that generated visual-inertial measurements.  
 <a href="classov__msckf_1_1Simulator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Simulator_8h_source.html">Simulator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab36fe774609d9e764219266867e21c4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#ab36fe774609d9e764219266867e21c4d">Simulator</a> (<a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a> &amp;params_)</td></tr>
<tr class="memdesc:ab36fe774609d9e764219266867e21c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor, will load all configuration variables.  <a href="#ab36fe774609d9e764219266867e21c4d">More...</a><br /></td></tr>
<tr class="separator:ab36fe774609d9e764219266867e21c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23596249c56e31c4a74567b4f4601a7c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a23596249c56e31c4a74567b4f4601a7c">ok</a> ()</td></tr>
<tr class="memdesc:a23596249c56e31c4a74567b4f4601a7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if we are actively simulating.  <a href="#a23596249c56e31c4a74567b4f4601a7c">More...</a><br /></td></tr>
<tr class="separator:a23596249c56e31c4a74567b4f4601a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10fbc2c949b380e152a3b9097b5b6643"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a10fbc2c949b380e152a3b9097b5b6643">current_timestamp</a> ()</td></tr>
<tr class="memdesc:a10fbc2c949b380e152a3b9097b5b6643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the timestamp we have simulated up too.  <a href="#a10fbc2c949b380e152a3b9097b5b6643">More...</a><br /></td></tr>
<tr class="separator:a10fbc2c949b380e152a3b9097b5b6643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ccf4a1249f70725edad1f9f4e80f9e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a3ccf4a1249f70725edad1f9f4e80f9e9">get_state</a> (double desired_time, Eigen::Matrix&lt; double, 17, 1 &gt; &amp;imustate)</td></tr>
<tr class="memdesc:a3ccf4a1249f70725edad1f9f4e80f9e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the simulation state at a specified timestep.  <a href="#a3ccf4a1249f70725edad1f9f4e80f9e9">More...</a><br /></td></tr>
<tr class="separator:a3ccf4a1249f70725edad1f9f4e80f9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5c6dd7e892a8948d3c2d2a3824fb39"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a1a5c6dd7e892a8948d3c2d2a3824fb39">get_next_imu</a> (double &amp;time_imu, Eigen::Vector3d &amp;wm, Eigen::Vector3d &amp;am)</td></tr>
<tr class="memdesc:a1a5c6dd7e892a8948d3c2d2a3824fb39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next inertial reading if we have one.  <a href="#a1a5c6dd7e892a8948d3c2d2a3824fb39">More...</a><br /></td></tr>
<tr class="separator:a1a5c6dd7e892a8948d3c2d2a3824fb39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add03be2fbfa53224369b07411b6a81b7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#add03be2fbfa53224369b07411b6a81b7">get_next_cam</a> (double &amp;time_cam, std::vector&lt; int &gt; &amp;camids, std::vector&lt; std::vector&lt; std::pair&lt; size_t, Eigen::VectorXf &gt;&gt;&gt; &amp;feats)</td></tr>
<tr class="memdesc:add03be2fbfa53224369b07411b6a81b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next inertial reading if we have one.  <a href="#add03be2fbfa53224369b07411b6a81b7">More...</a><br /></td></tr>
<tr class="separator:add03be2fbfa53224369b07411b6a81b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca2fcef0b73e4c570049030438caa60b"><td class="memItemLeft" align="right" valign="top"><a id="aca2fcef0b73e4c570049030438caa60b"></a>
std::unordered_map&lt; size_t, Eigen::Vector3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#aca2fcef0b73e4c570049030438caa60b">get_map</a> ()</td></tr>
<tr class="memdesc:aca2fcef0b73e4c570049030438caa60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the true 3d map of features. <br /></td></tr>
<tr class="separator:aca2fcef0b73e4c570049030438caa60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f03a9aefbf97bccf950059608bd3c1"><td class="memItemLeft" align="right" valign="top"><a id="aa6f03a9aefbf97bccf950059608bd3c1"></a>
std::vector&lt; Eigen::Vector3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#aa6f03a9aefbf97bccf950059608bd3c1">get_map_vec</a> ()</td></tr>
<tr class="memdesc:aa6f03a9aefbf97bccf950059608bd3c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the true 3d map of features. <br /></td></tr>
<tr class="separator:aa6f03a9aefbf97bccf950059608bd3c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7f99eb6dd01918d88f6db017c83830"><td class="memItemLeft" align="right" valign="top"><a id="a3a7f99eb6dd01918d88f6db017c83830"></a>
<a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a3a7f99eb6dd01918d88f6db017c83830">get_true_parameters</a> ()</td></tr>
<tr class="memdesc:a3a7f99eb6dd01918d88f6db017c83830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access function to get the true parameters (i.e. calibration and settings) <br /></td></tr>
<tr class="separator:a3a7f99eb6dd01918d88f6db017c83830"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab7b38fccf364b602eef8294524f3f30a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#ab7b38fccf364b602eef8294524f3f30a">perturb_parameters</a> (std::mt19937 gen_state, <a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a> &amp;params_)</td></tr>
<tr class="memdesc:ab7b38fccf364b602eef8294524f3f30a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will get a set of perturbed parameters.  <a href="#ab7b38fccf364b602eef8294524f3f30a">More...</a><br /></td></tr>
<tr class="separator:ab7b38fccf364b602eef8294524f3f30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1c6947099892bd64e2bad9b4c9303226"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; size_t, Eigen::VectorXf &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a1c6947099892bd64e2bad9b4c9303226">project_pointcloud</a> (const Eigen::Matrix3d &amp;R_GtoI, const Eigen::Vector3d &amp;p_IinG, int camid, const std::unordered_map&lt; size_t, Eigen::Vector3d &gt; &amp;feats)</td></tr>
<tr class="memdesc:a1c6947099892bd64e2bad9b4c9303226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Projects the passed map features into the desired camera frame.  <a href="#a1c6947099892bd64e2bad9b4c9303226">More...</a><br /></td></tr>
<tr class="separator:a1c6947099892bd64e2bad9b4c9303226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a511b2edf20545972ced008fddb0654ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a511b2edf20545972ced008fddb0654ae">generate_points</a> (const Eigen::Matrix3d &amp;R_GtoI, const Eigen::Vector3d &amp;p_IinG, int camid, std::unordered_map&lt; size_t, Eigen::Vector3d &gt; &amp;feats, int numpts)</td></tr>
<tr class="memdesc:a511b2edf20545972ced008fddb0654ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will generate points in the fov of the specified camera.  <a href="#a511b2edf20545972ced008fddb0654ae">More...</a><br /></td></tr>
<tr class="separator:a511b2edf20545972ced008fddb0654ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aaf26d06a73b0773018df69382dc2b3bc"><td class="memItemLeft" align="right" valign="top"><a id="aaf26d06a73b0773018df69382dc2b3bc"></a>
<a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#aaf26d06a73b0773018df69382dc2b3bc">params</a></td></tr>
<tr class="memdesc:aaf26d06a73b0773018df69382dc2b3bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">True vio manager params (a copy of the parsed ones) <br /></td></tr>
<tr class="separator:aaf26d06a73b0773018df69382dc2b3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e667cafe40b3f648ebd773153de72e"><td class="memItemLeft" align="right" valign="top"><a id="af1e667cafe40b3f648ebd773153de72e"></a>
std::vector&lt; Eigen::VectorXd &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#af1e667cafe40b3f648ebd773153de72e">traj_data</a></td></tr>
<tr class="memdesc:af1e667cafe40b3f648ebd773153de72e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our loaded trajectory data (timestamp(s), q_GtoI, p_IinG) <br /></td></tr>
<tr class="separator:af1e667cafe40b3f648ebd773153de72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd11bf8b7d9df46ea335ef7fa10271e"><td class="memItemLeft" align="right" valign="top"><a id="a4dd11bf8b7d9df46ea335ef7fa10271e"></a>
std::shared_ptr&lt; <a class="el" href="classov__core_1_1BsplineSE3.html">ov_core::BsplineSE3</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a4dd11bf8b7d9df46ea335ef7fa10271e">spline</a></td></tr>
<tr class="memdesc:a4dd11bf8b7d9df46ea335ef7fa10271e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our b-spline trajectory. <br /></td></tr>
<tr class="separator:a4dd11bf8b7d9df46ea335ef7fa10271e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125ad6c49a2f30934a1b233534fbfb27"><td class="memItemLeft" align="right" valign="top"><a id="a125ad6c49a2f30934a1b233534fbfb27"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a125ad6c49a2f30934a1b233534fbfb27">id_map</a> = 0</td></tr>
<tr class="memdesc:a125ad6c49a2f30934a1b233534fbfb27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our map of 3d features. <br /></td></tr>
<tr class="separator:a125ad6c49a2f30934a1b233534fbfb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51326add48004cb3c178d1a18ec7bd93"><td class="memItemLeft" align="right" valign="top"><a id="a51326add48004cb3c178d1a18ec7bd93"></a>
std::unordered_map&lt; size_t, Eigen::Vector3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>featmap</b></td></tr>
<tr class="separator:a51326add48004cb3c178d1a18ec7bd93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a21cc7b02ea84f58193093a3066cb52"><td class="memItemLeft" align="right" valign="top"><a id="a5a21cc7b02ea84f58193093a3066cb52"></a>
std::mt19937&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a5a21cc7b02ea84f58193093a3066cb52">gen_meas_imu</a></td></tr>
<tr class="memdesc:a5a21cc7b02ea84f58193093a3066cb52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mersenne twister PRNG for measurements (IMU) <br /></td></tr>
<tr class="separator:a5a21cc7b02ea84f58193093a3066cb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b3202d5b9b277bc695970b4f1beeb9"><td class="memItemLeft" align="right" valign="top"><a id="a31b3202d5b9b277bc695970b4f1beeb9"></a>
std::vector&lt; std::mt19937 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a31b3202d5b9b277bc695970b4f1beeb9">gen_meas_cams</a></td></tr>
<tr class="memdesc:a31b3202d5b9b277bc695970b4f1beeb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mersenne twister PRNG for measurements (CAMERAS) <br /></td></tr>
<tr class="separator:a31b3202d5b9b277bc695970b4f1beeb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4933a78e8768bdbc0bac91572f6b6d42"><td class="memItemLeft" align="right" valign="top"><a id="a4933a78e8768bdbc0bac91572f6b6d42"></a>
std::mt19937&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a4933a78e8768bdbc0bac91572f6b6d42">gen_state_init</a></td></tr>
<tr class="memdesc:a4933a78e8768bdbc0bac91572f6b6d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mersenne twister PRNG for state initialization. <br /></td></tr>
<tr class="separator:a4933a78e8768bdbc0bac91572f6b6d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6903d5e046acabb9c177ba3dd2dbff"><td class="memItemLeft" align="right" valign="top"><a id="a7e6903d5e046acabb9c177ba3dd2dbff"></a>
std::mt19937&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a7e6903d5e046acabb9c177ba3dd2dbff">gen_state_perturb</a></td></tr>
<tr class="memdesc:a7e6903d5e046acabb9c177ba3dd2dbff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mersenne twister PRNG for state perturbations. <br /></td></tr>
<tr class="separator:a7e6903d5e046acabb9c177ba3dd2dbff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287cc404a867d549ec7c72613a884ee4"><td class="memItemLeft" align="right" valign="top"><a id="a287cc404a867d549ec7c72613a884ee4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a287cc404a867d549ec7c72613a884ee4">is_running</a></td></tr>
<tr class="memdesc:a287cc404a867d549ec7c72613a884ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">If our simulation is running. <br /></td></tr>
<tr class="separator:a287cc404a867d549ec7c72613a884ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159c617f73068f44833ed697255e5b86"><td class="memItemLeft" align="right" valign="top"><a id="a159c617f73068f44833ed697255e5b86"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a159c617f73068f44833ed697255e5b86">timestamp</a></td></tr>
<tr class="memdesc:a159c617f73068f44833ed697255e5b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current timestamp of the system. <br /></td></tr>
<tr class="separator:a159c617f73068f44833ed697255e5b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ab83038e9ef893633e4290e5342ac9"><td class="memItemLeft" align="right" valign="top"><a id="ac7ab83038e9ef893633e4290e5342ac9"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#ac7ab83038e9ef893633e4290e5342ac9">timestamp_last_imu</a></td></tr>
<tr class="memdesc:ac7ab83038e9ef893633e4290e5342ac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last time we had an IMU reading. <br /></td></tr>
<tr class="separator:ac7ab83038e9ef893633e4290e5342ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e473df4f12ac26610c19bb0d4bc0a67"><td class="memItemLeft" align="right" valign="top"><a id="a1e473df4f12ac26610c19bb0d4bc0a67"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a1e473df4f12ac26610c19bb0d4bc0a67">timestamp_last_cam</a></td></tr>
<tr class="memdesc:a1e473df4f12ac26610c19bb0d4bc0a67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last time we had an CAMERA reading. <br /></td></tr>
<tr class="separator:a1e473df4f12ac26610c19bb0d4bc0a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b97c9c0cc01e127bc9f178edd8b12c4"><td class="memItemLeft" align="right" valign="top"><a id="a9b97c9c0cc01e127bc9f178edd8b12c4"></a>
Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a9b97c9c0cc01e127bc9f178edd8b12c4">true_bias_accel</a> = Eigen::Vector3d::Zero()</td></tr>
<tr class="memdesc:a9b97c9c0cc01e127bc9f178edd8b12c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our running acceleration bias. <br /></td></tr>
<tr class="separator:a9b97c9c0cc01e127bc9f178edd8b12c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca24090484965ea8344a1b1605b963a"><td class="memItemLeft" align="right" valign="top"><a id="a9ca24090484965ea8344a1b1605b963a"></a>
Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classov__msckf_1_1Simulator.html#a9ca24090484965ea8344a1b1605b963a">true_bias_gyro</a> = Eigen::Vector3d::Zero()</td></tr>
<tr class="memdesc:a9ca24090484965ea8344a1b1605b963a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our running gyroscope bias. <br /></td></tr>
<tr class="separator:a9ca24090484965ea8344a1b1605b963a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a588194049105eff55c365fd22a780"><td class="memItemLeft" align="right" valign="top"><a id="a91a588194049105eff55c365fd22a780"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_skipped_first_bias</b> = false</td></tr>
<tr class="separator:a91a588194049105eff55c365fd22a780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1e507ae501f7c579ee720c8e045ba4"><td class="memItemLeft" align="right" valign="top"><a id="a9f1e507ae501f7c579ee720c8e045ba4"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>hist_true_bias_time</b></td></tr>
<tr class="separator:a9f1e507ae501f7c579ee720c8e045ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df35c4576725f47ad3a04def6358433"><td class="memItemLeft" align="right" valign="top"><a id="a4df35c4576725f47ad3a04def6358433"></a>
std::vector&lt; Eigen::Vector3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>hist_true_bias_accel</b></td></tr>
<tr class="separator:a4df35c4576725f47ad3a04def6358433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449f347bf5e1354efbfc8467454ff442"><td class="memItemLeft" align="right" valign="top"><a id="a449f347bf5e1354efbfc8467454ff442"></a>
std::vector&lt; Eigen::Vector3d &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>hist_true_bias_gyro</b></td></tr>
<tr class="separator:a449f347bf5e1354efbfc8467454ff442"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Master simulator class that generated visual-inertial measurements. </p>
<p>Given a trajectory this will generate a SE(3) <a class="el" href="classov__core_1_1BsplineSE3.html">ov_core::BsplineSE3</a> for that trajectory. This allows us to get the inertial measurement information at each timestep during this trajectory. After creating the bspline we will generate an environmental feature map which will be used as our feature measurements. This map will be projected into the frame at each timestep to get our "raw" uv measurements. We inject bias and white noises into our inertial readings while adding our white noise to the uv measurements also. The user should specify the sensor rates that they desire along with the seeds of the random number generators. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab36fe774609d9e764219266867e21c4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab36fe774609d9e764219266867e21c4d">&#9670;&nbsp;</a></span>Simulator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Simulator::Simulator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>params_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor, will load all configuration variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params_</td><td><a class="el" href="classov__msckf_1_1VioManager.html" title="Core class that manages the entire system. ">VioManager</a> parameters. Should have already been loaded from cmd. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a10fbc2c949b380e152a3b9097b5b6643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10fbc2c949b380e152a3b9097b5b6643">&#9670;&nbsp;</a></span>current_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ov_msckf::Simulator::current_timestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the timestamp we have simulated up too. </p>
<dl class="section return"><dt>Returns</dt><dd>Timestamp </dd></dl>

</div>
</div>
<a id="a511b2edf20545972ced008fddb0654ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a511b2edf20545972ced008fddb0654ae">&#9670;&nbsp;</a></span>generate_points()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Simulator::generate_points </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix3d &amp;&#160;</td>
          <td class="paramname"><em>R_GtoI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>p_IinG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>camid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; size_t, Eigen::Vector3d &gt; &amp;&#160;</td>
          <td class="paramname"><em>feats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numpts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will generate points in the fov of the specified camera. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">R_GtoI</td><td>Orientation of the IMU pose </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">p_IinG</td><td>Position of the IMU pose </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">camid</td><td>Camera id of the camera sensor we want to project into </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">feats</td><td>Map we will append new features to </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">numpts</td><td>Number of points we should generate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="add03be2fbfa53224369b07411b6a81b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add03be2fbfa53224369b07411b6a81b7">&#9670;&nbsp;</a></span>get_next_cam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Simulator::get_next_cam </td>
          <td>(</td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>time_cam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>camids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; std::pair&lt; size_t, Eigen::VectorXf &gt;&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>feats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the next inertial reading if we have one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time_cam</td><td>Time that this measurement occured at </td></tr>
    <tr><td class="paramname">camids</td><td>Camera ids that the corresponding vectors match </td></tr>
    <tr><td class="paramname">feats</td><td>Noisy uv measurements and ids for the returned time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if we have a measurement </dd></dl>

</div>
</div>
<a id="a1a5c6dd7e892a8948d3c2d2a3824fb39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5c6dd7e892a8948d3c2d2a3824fb39">&#9670;&nbsp;</a></span>get_next_imu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Simulator::get_next_imu </td>
          <td>(</td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>time_imu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>am</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the next inertial reading if we have one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time_imu</td><td>Time that this measurement occured at </td></tr>
    <tr><td class="paramname">wm</td><td>Angular velocity measurement in the inertial frame </td></tr>
    <tr><td class="paramname">am</td><td>Linear velocity in the inertial frame </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if we have a measurement </dd></dl>

</div>
</div>
<a id="a3ccf4a1249f70725edad1f9f4e80f9e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ccf4a1249f70725edad1f9f4e80f9e9">&#9670;&nbsp;</a></span>get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Simulator::get_state </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>desired_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Matrix&lt; double, 17, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>imustate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the simulation state at a specified timestep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desired_time</td><td>Timestamp we want to get the state at </td></tr>
    <tr><td class="paramname">imustate</td><td><a class="el" href="classov__msckf_1_1State.html" title="State of our filter. ">State</a> in the MSCKF ordering: [time(sec),q_GtoI,p_IinG,v_IinG,b_gyro,b_accel] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if we have a state </dd></dl>

</div>
</div>
<a id="a23596249c56e31c4a74567b4f4601a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23596249c56e31c4a74567b4f4601a7c">&#9670;&nbsp;</a></span>ok()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ov_msckf::Simulator::ok </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if we are actively simulating. </p>
<dl class="section return"><dt>Returns</dt><dd>True if we still have simulation data </dd></dl>

</div>
</div>
<a id="ab7b38fccf364b602eef8294524f3f30a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b38fccf364b602eef8294524f3f30a">&#9670;&nbsp;</a></span>perturb_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Simulator::perturb_parameters </td>
          <td>(</td>
          <td class="paramtype">std::mt19937&#160;</td>
          <td class="paramname"><em>gen_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structov__msckf_1_1VioManagerOptions.html">VioManagerOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>params_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will get a set of perturbed parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gen_state</td><td>Random number gen to use </td></tr>
    <tr><td class="paramname">params_</td><td>Parameters we will perturb </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c6947099892bd64e2bad9b4c9303226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6947099892bd64e2bad9b4c9303226">&#9670;&nbsp;</a></span>project_pointcloud()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; size_t, Eigen::VectorXf &gt; &gt; Simulator::project_pointcloud </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Matrix3d &amp;&#160;</td>
          <td class="paramname"><em>R_GtoI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>p_IinG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>camid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; size_t, Eigen::Vector3d &gt; &amp;&#160;</td>
          <td class="paramname"><em>feats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Projects the passed map features into the desired camera frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">R_GtoI</td><td>Orientation of the IMU pose </td></tr>
    <tr><td class="paramname">p_IinG</td><td>Position of the IMU pose </td></tr>
    <tr><td class="paramname">camid</td><td>Camera id of the camera sensor we want to project into </td></tr>
    <tr><td class="paramname">feats</td><td>Our set of 3d features </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True distorted raw image measurements and their ids for the specified camera </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
